<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/png" href="/Ace2exam_Wa.png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description"
    content="Ace2Examz - Your Path To Success! Premier Chemistry Coaching for NEET, JEE, IAT, NEST, CSIR NET, GATE, IIT JAM & TIFR" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  <link
    href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Rajdhani:wght@300;500;700&display=swap"
    rel="stylesheet">

  <!-- Zoho Campaigns Newsletter Scripts -->
  <script type="text/javascript" src="https://exmz-zc1.maillist-manage.in/js/optin.min.js"
    onload="setupSF('sf3z9a6c989be977e55a4b7314f1064d24923d8081c2d7b577011b09adb8de5640f9','ZCFORMVIEW',false,'light',false,'0')"></script>
  <script type="text/javascript">
    function runOnFormSubmit_sf3z9a6c989be977e55a4b7314f1064d24923d8081c2d7b577011b09adb8de5640f9(th) {
      /*Before submit, if you want to trigger your event, "include your code here"*/
    };
  </script>

  <!-- Custom CSS for OneSignal Bell Position -->
  <style>
    /* Position OneSignal bell button in bottom-left corner */
    .onesignal-bell-launcher,
    #onesignal-bell-container,
    .onesignal-bell-launcher-button,
    div[class*="onesignal-bell"]:not(.onesignal-bell-launcher-dialog):not(.onesignal-bell-launcher-dialog-body) {
      bottom: 20px !important;
      top: auto !important;
      left: 20px !important;
      right: auto !important;
      transform: none !important;
      position: fixed !important;
      width: 60px !important;
      height: 60px !important;
      max-width: 60px !important;
      max-height: 60px !important;
      min-width: 60px !important;
      min-height: 60px !important;
      z-index: 999999 !important;
      /* Highest z-index to stay on top of everything */
    }

    /* Size the bell icon itself */
    .onesignal-bell-launcher .onesignal-bell-launcher-button,
    .onesignal-bell-launcher svg,
    .onesignal-bell-launcher img {
      width: 60px !important;
      height: 60px !important;
    }

    /* Position the notification dialog to the RIGHT of the bell */
    .onesignal-bell-launcher-dialog,
    .onesignal-bell-launcher-dialog-body,
    div[class*="onesignal-bell-launcher-dialog"] {
      bottom: 20px !important;
      /* Same level as bell */
      top: auto !important;
      left: 100px !important;
      /* To the right: 20px + 60px + 20px spacing */
      right: auto !important;
      transform: none !important;
      position: fixed !important;
      z-index: 999998 !important;
      /* Below bell but above everything else */
      max-width: 360px !important;
      width: 360px !important;
      max-height: 450px !important;
      overflow-y: auto !important;
    }

    /* Ensure bell stays on top with maximum z-index */
    .onesignal-bell-launcher {
      z-index: 999999 !important;
    }

    /* Dialog below bell in z-index */
    .onesignal-bell-launcher-dialog {
      z-index: 999998 !important;
    }

    /* Make sure bell button is always clickable and visible */
    .onesignal-bell-launcher-button {
      pointer-events: auto !important;
      z-index: 999999 !important;
      background: rgba(0, 0, 0, 0.8) !important;
      border-radius: 50% !important;
      cursor: pointer !important;
    }
  </style>

  <!-- OneSignal Push Notifications -->
  <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
  <script>
    window.OneSignalDeferred = window.OneSignalDeferred || [];
    OneSignalDeferred.push(async function (OneSignal) {
      try {
        console.log('[OneSignal] üöÄ Starting initialization...');

        await OneSignal.init({
          appId: "f19678f2-4968-4172-b5a8-7854008c21b0",
          safari_web_id: "web.onesignal.auto.41b6a3ea-cfe2-480b-805a-97ab17a018f3",
          notifyButton: {
            enable: true,
            size: 'medium',
            position: 'bottom-left',
            showCredit: false,
          },
          allowLocalhostAsSecureOrigin: true,
        });

        console.log('[OneSignal] ‚úÖ Initialized successfully');
        console.log('[OneSignal] App ID:', "f19678f2-4968-4172-b5a8-7854008c21b0");

        // Check subscription status
        const optedIn = await OneSignal.User.PushSubscription.optedIn;
        console.log('[OneSignal] User opted in:', optedIn);

        if (optedIn) {
          // Get subscription ID
          const subscriptionId = await OneSignal.User.PushSubscription.id;
          console.log('[OneSignal] Subscription ID:', subscriptionId);

          // Get user ID
          const userId = await OneSignal.User.id;
          console.log('[OneSignal] User ID:', userId);
        } else {
          console.log('[OneSignal] ‚ö†Ô∏è User not subscribed. Click the bell icon to subscribe.');
        }

        // Listen for subscription changes
        OneSignal.User.PushSubscription.addEventListener('change', (event) => {
          console.log('[OneSignal] üîî Subscription changed:', event);
          console.log('[OneSignal] New subscription status:', event.current.optedIn);
        });

        // Listen for notification display
        OneSignal.Notifications.addEventListener('foregroundWillDisplay', (event) => {
          console.log('[OneSignal] üì¨ Notification will display:', event.notification);
        });

        // Listen for notification click
        OneSignal.Notifications.addEventListener('click', (event) => {
          console.log('[OneSignal] üëÜ Notification clicked:', event.notification);
        });

        // Add click listener to bell button for debugging AND manual trigger
        setTimeout(() => {
          const bellButton = document.querySelector('.onesignal-bell-launcher-button');
          const bellLauncher = document.querySelector('.onesignal-bell-launcher');

          if (bellButton || bellLauncher) {
            console.log('[OneSignal] ‚úÖ Bell button found!');

            const clickHandler = async (e) => {
              console.log('[OneSignal] üîî Bell button clicked!');

              try {
                // Check if user is subscribed
                const isSubscribed = await OneSignal.User.PushSubscription.optedIn;
                console.log('[OneSignal] User subscribed:', isSubscribed);

                if (isSubscribed) {
                  // User is subscribed - try to show notification panel
                  console.log('[OneSignal] User already subscribed, looking for notification panel...');

                  // Wait a bit for the panel to be created
                  setTimeout(() => {
                    const dialog = document.querySelector('.onesignal-bell-launcher-dialog');
                    if (dialog) {
                      console.log('[OneSignal] Found notification panel, making it visible');
                      dialog.style.setProperty('display', 'block', 'important');
                      dialog.style.setProperty('visibility', 'visible', 'important');
                      dialog.style.setProperty('opacity', '1', 'important');
                    } else {
                      console.log('[OneSignal] ‚ö†Ô∏è Notification panel not found - bell might not have notifications');
                    }
                  }, 100);
                } else {
                  // User not subscribed - show subscription prompt
                  console.log('[OneSignal] User not subscribed, showing prompt...');
                  await OneSignal.Slidedown.promptPush();
                }
              } catch (error) {
                console.error('[OneSignal] Error:', error);
              }
            };

            if (bellButton) {
              bellButton.addEventListener('click', clickHandler, true);
              bellButton.style.pointerEvents = 'auto';
              bellButton.style.cursor = 'pointer';
            }
            if (bellLauncher) {
              bellLauncher.addEventListener('click', clickHandler, true);
              bellLauncher.style.pointerEvents = 'auto';
              bellLauncher.style.cursor = 'pointer';
            }
          } else {
            console.error('[OneSignal] ‚ùå Bell button not found!');
          }
        }, 3000);

        // Force reposition bell button to bottom-left and dialog to the right
        setTimeout(() => {
          const bellElements = [
            document.querySelector('.onesignal-bell-launcher'),
            document.querySelector('#onesignal-bell-container'),
            document.querySelector('.onesignal-bell-launcher-button'),
            ...document.querySelectorAll('[class*="onesignal-bell"]:not([class*="dialog"])')
          ];

          console.log('[OneSignal] Found', bellElements.filter(e => e).length, 'bell elements');

          bellElements.forEach(element => {
            if (element) {
              element.style.setProperty('bottom', '20px', 'important');
              element.style.setProperty('top', 'auto', 'important');
              element.style.setProperty('left', '20px', 'important');
              element.style.setProperty('right', 'auto', 'important');
              element.style.setProperty('position', 'fixed', 'important');
              element.style.setProperty('transform', 'none', 'important');
              element.style.setProperty('z-index', '999999', 'important');
              element.style.setProperty('width', '60px', 'important');
              element.style.setProperty('height', '60px', 'important');
              element.style.setProperty('max-width', '60px', 'important');
              element.style.setProperty('max-height', '60px', 'important');
              element.style.setProperty('min-width', '60px', 'important');
              element.style.setProperty('min-height', '60px', 'important');
              element.style.setProperty('background', 'rgba(0, 0, 0, 0.8)', 'important');
              element.style.setProperty('border-radius', '50%', 'important');
              element.style.setProperty('pointer-events', 'auto', 'important');
              element.style.setProperty('cursor', 'pointer', 'important');
              console.log('[OneSignal] Bell button repositioned to bottom-left with size 60x60px');
            }
          });

          // Position dialog to the RIGHT of the bell
          const dialogElements = [
            document.querySelector('.onesignal-bell-launcher-dialog'),
            document.querySelector('.onesignal-bell-launcher-dialog-body'),
            ...document.querySelectorAll('[class*="onesignal-bell-launcher-dialog"]')
          ];

          dialogElements.forEach(element => {
            if (element) {
              element.style.setProperty('bottom', '20px', 'important'); // Same level as bell
              element.style.setProperty('top', 'auto', 'important');
              element.style.setProperty('left', '100px', 'important'); // To the right of bell
              element.style.setProperty('right', 'auto', 'important');
              element.style.setProperty('position', 'fixed', 'important');
              element.style.setProperty('transform', 'none', 'important');
              element.style.setProperty('z-index', '999998', 'important');
              element.style.setProperty('max-width', '360px', 'important');
              element.style.setProperty('width', '360px', 'important');
              element.style.setProperty('max-height', '450px', 'important');
              console.log('[OneSignal] Dialog positioned to the right of bell');
            }
          });
        }, 2000);

        // Also watch for dialog creation with MutationObserver
        const observer = new MutationObserver((mutations) => {
          mutations.forEach((mutation) => {
            mutation.addedNodes.forEach((node) => {
              if (node.nodeType === 1 && node.className && node.className.includes('onesignal-bell-launcher-dialog')) {
                node.style.setProperty('bottom', '20px', 'important');
                node.style.setProperty('top', 'auto', 'important');
                node.style.setProperty('left', '100px', 'important');
                node.style.setProperty('right', 'auto', 'important');
                node.style.setProperty('position', 'fixed', 'important');
                node.style.setProperty('transform', 'none', 'important');
                node.style.setProperty('z-index', '999998', 'important');
                node.style.setProperty('max-width', '360px', 'important');
                node.style.setProperty('width', '360px', 'important');
                node.style.setProperty('max-height', '450px', 'important');
                console.log('[OneSignal] Dialog dynamically positioned to the right of bell');
              }
            });
          });
        });

        observer.observe(document.body, {
          childList: true,
          subtree: true
        });

      } catch (error) {
        console.error('[OneSignal] ‚ùå Initialization error:', error);
        console.error('[OneSignal] Error details:', error.message, error.stack);
      }
    });
  </script>

  <title>Ace2Examz | Your Path To Success - Premier Chemistry Coaching</title>
</head>

<body>
  <div id="root"></div>
  <script type="module" src="/src/main.jsx"></script>

  <!-- Frillbot Chatbot Widget -->
  <script>
    window.chatpilotIframeConfig = {
      chatbotId: "09ab53ae7eec4078b03364a594c688af",
      domain: "https://bot.frillbot.com"
    }
  </script>
  <script src="https://bot.frillbot.com/embed.iframe.js" charset="utf-8"></script>

  <!-- Zoho SalesIQ Chat Widget -->
  <script>window.$zoho = window.$zoho || {}; $zoho.salesiq = $zoho.salesiq || { ready: function () { } }</script>
  <script id="zsiqscript"
    src="https://salesiq.zohopublic.in/widget?wc=siqdbcc2b03c10f8abbc3df039feed66993c517bd0e377a23ce7755db070ef77509"
    defer></script>
</body>

</html>